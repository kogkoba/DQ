<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ドラクエ風クイズRPG</title>
  <style>
    body { margin: 0; padding: 20px; font-family: sans-serif; text-align: center; background-color: #222; color: #fff; }
    canvas {
      background: url('フィールド画像.png') no-repeat center center;
      background-size: cover;
      display: block;
      margin: auto;
      border: 2px solid white;
    }
    #status { font-size: 20px; margin: 10px; }
  </style>
</head>
<body>

  <h1>ドラクエ風クイズRPG</h1>
  <div id="status">プレイヤーのHP: <span id="hp">100</span> / レベル: <span id="level">1</span></div>
  <canvas id="gameCanvas" width="600" height="400"></canvas>

  <script>
    let player = { x: 300, y: 200, hp: 100, level: 1, steps: 0 };
    let isDragging = false;  // マウスドラッグ中かどうか
    let canvas, ctx;

    // ✅ プレイヤーを描画する関数
    function drawPlayer() {
      ctx.clearRect(0, 0, canvas.width, canvas.height); // 画面をクリア
      ctx.fillStyle = "red"; // プレイヤーの色（赤）
      ctx.fillRect(player.x - 10, player.y - 10, 20, 20); // プレイヤーの描画
    }

    // ✅ マウスのドラッグ操作でプレイヤーを移動
    function startDrag(event) {
      isDragging = true;
    }

    function dragMove(event) {
      if (!isDragging) return;

      // マウス座標をキャンバス内の座標に変換
      let rect = canvas.getBoundingClientRect();
      player.x = event.clientX - rect.left;
      player.y = event.clientY - rect.top;

      drawPlayer(); // 位置を更新して再描画
    }

    function endDrag() {
      isDragging = false;
    }

    // ✅ 初期化関数（canvasとイベントを設定）
    function initGame() {
      canvas = document.getElementById("gameCanvas");
      ctx = canvas.getContext("2d");

      drawPlayer(); // 初回のプレイヤー描画

      // イベントリスナーを設定（マウスドラッグ処理）
      canvas.addEventListener("mousedown", startDrag);
      canvas.addEventListener("mousemove", dragMove);
      canvas.addEventListener("mouseup", endDrag);
      canvas.addEventListener("mouseleave", endDrag);
    }

    window.onload = initGame; // ゲーム開始時に初期化
  </script>

</body>
</html>
