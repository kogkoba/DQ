<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>èƒŒæ™¯ç”»åƒãƒ†ã‚¹ãƒˆ</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: sans-serif;
      text-align: center;
      background-color: #222;
      color: #fff;
    }
    canvas {
      display: block;
      margin: auto;
      border: 2px solid white;
    }
  </style>
</head>
<body>

  <h1>èƒŒæ™¯ç”»åƒãƒ†ã‚¹ãƒˆ</h1>
  <canvas id="gameCanvas" width="600" height="400"></canvas>

  <script>
    let canvas, ctx;

    // âœ… Google Drive ã®ç”»åƒURLã‚’é©åˆ‡ãªå½¢å¼ã«å¤‰æ›
    function convertGoogleDriveURL(url) {
      let match = url.match(/(?:id=|\/d\/)([a-zA-Z0-9_-]+)/);
      return match ? `https://lh3.googleusercontent.com/d/${match[1]}=s0` : url;
    }

    // ğŸ® ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰èƒŒæ™¯ç”»åƒ
    let backgroundImg = new Image();
    let backgroundURL = "https://drive.google.com/file/d/1jDckidA8IqAdhUncYX09kzOQd2IqanYQ/view?usp=sharing";
    backgroundImg.src = convertGoogleDriveURL(backgroundURL);

    function drawBackground() {
      if (!ctx) {
        console.error("âŒ Canvas ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒå–å¾—ã§ãã¦ã„ã¾ã›ã‚“");
        return;
      }
      console.log("âœ… èƒŒæ™¯ç”»åƒã‚’æç”»ã—ã¾ã™");
      ctx.drawImage(backgroundImg, 0, 0, canvas.width, canvas.height);
    }

    function initGame() {
      canvas = document.getElementById("gameCanvas");
      if (!canvas) {
        console.error("âŒ Canvas ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
        return;
      }
      ctx = canvas.getContext("2d");
      if (!ctx) {
        console.error("âŒ Canvas ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ");
        return;
      }

      console.log("âœ… Canvas åˆæœŸåŒ–æˆåŠŸ");

      // èƒŒæ™¯ç”»åƒã®ãƒ­ãƒ¼ãƒ‰ãŒå®Œäº†ã—ãŸã‚‰æç”»
      backgroundImg.onload = function() {
        console.log("âœ… èƒŒæ™¯ç”»åƒãƒ­ãƒ¼ãƒ‰å®Œäº†");
        drawBackground();
      };

      backgroundImg.onerror = function() {
        console.error("âŒ èƒŒæ™¯ç”»åƒã®ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—:", backgroundImg.src);
      };
    }

    window.onload = initGame;
  </script>

</body>
</html>
