<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>プレイヤーを歩かせる例</title>
  <style>
    /* 全画面を使う */
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
    }

    /* フィールド（背景）全体を覆うコンテナ */
    #gameArea {
      position: relative;
      width: 100%;
      height: 100%;
      background: url("https://lh3.googleusercontent.com/d/1jDckidA8IqAdhUncYX09kzOQd2IqanYQ") no-repeat center center / cover;
      overflow: hidden; /* プレイヤーがはみ出ないようにする */
    }

    /* プレイヤー画像 */
    #player {
      position: absolute;
      width: 120px;   /* 必要に応じて調整 */
      left: 50%;      /* 初期位置: 画面中央あたり */
      top: 50%;
      transform: translate(-50%, -50%); /* 中心に配置するための補正 */
    }

    /* 右下に配置するD-Pad */
    #dpad {
      position: absolute;
      bottom: 20px;
      right: 20px;
      width: 120px;
      height: 120px;
      display: grid;
      grid-template-areas:
        ".    up    ."
        "left center right"
        ".    down  .";
      grid-gap: 5px;
    }

    .dpad-button {
      width: 40px;
      height: 40px;
      background: rgba(0, 0, 0, 0.3);
      border: 2px solid #fff;
      border-radius: 5px;
      cursor: pointer;
    }

    .up    { grid-area: up; }
    .down  { grid-area: down; }
    .left  { grid-area: left; }
    .right { grid-area: right; }
    .center{ grid-area: center; }
  </style>
</head>
<body>

<div id="gameArea">
  <!-- プレイヤー（最初は立ち姿） -->
  <img
    id="player"
    src="https://lh3.googleusercontent.com/d/1peHOi70oOmL8c9v3OQydE5N-9R0PB6vh"
    alt="player"
  />

  <!-- 画面右下のD-Pad -->
  <div id="dpad">
    <div class="dpad-button up"    onclick="movePlayer(0, -STEP)"></div>
    <div class="dpad-button left"  onclick="movePlayer(-STEP, 0)"></div>
    <div class="dpad-button center"></div>
    <div class="dpad-button right" onclick="movePlayer(STEP, 0)"></div>
    <div class="dpad-button down"  onclick="movePlayer(0, STEP)"></div>
  </div>
</div>

<script>
  // プレイヤーの歩行アニメ用に3パターンの画像を配列で管理
  // 0: 立ち姿, 1: 右足前, 2: 左足前
  const playerImages = [
    "https://lh3.googleusercontent.com/d/1peHOi70oOmL8c9v3OQydE5N-9R0PB6vh", // 立ち姿
    "https://lh3.googleusercontent.com/d/1iuVZiT6Eh9mp2Ta__Cpm5z28HZ2k0YA0", // 右足前
    "https://lh3.googleusercontent.com/d/1fCmul9iotoUh4MLa_qzHvaOUDYMvng8C"  // 左足前
  ];
  
  // 現在の画像がどの状態かを示すインデックス
  let currentImageIndex = 0;
  
  // 1歩あたりの移動量(px)
  const STEP = 20;

  // プレイヤー要素を取得
  const player = document.getElementById("player");
  // プレイヤーの位置を管理する変数
  // （style.left/topは文字列になるので、数値として持っておくと扱いやすい）
  let playerX = parseInt(player.style.left) || window.innerWidth  / 2;
  let playerY = parseInt(player.style.top)  || window.innerHeight / 2;

  // プレイヤーを実際に移動させる関数
  function movePlayer(dx, dy) {
    // 歩行アニメ用に画像を切り替え
    // 0 -> 1 -> 2 -> 0 -> 1 -> 2 ... と循環させる
    currentImageIndex = (currentImageIndex + 1) % playerImages.length;
    player.src = playerImages[currentImageIndex];

    // 現在位置を更新
    playerX += dx;
    playerY += dy;

    // 画面サイズやgameAreaのサイズに合わせて境界チェックをする場合は
    // 以下のようにする。（簡易的にウィンドウサイズで判定）
    const playerWidth  = player.offsetWidth;
    const playerHeight = player.offsetHeight;
    const maxX = window.innerWidth  - playerWidth;
    const maxY = window.innerHeight - playerHeight;

    // 範囲外に出ないように調整
    if (playerX < 0)    playerX = 0;
    if (playerY < 0)    playerY = 0;
    if (playerX > maxX) playerX = maxX;
    if (playerY > maxY) playerY = maxY;

    // 実際のスタイルを更新
    player.style.left = playerX + "px";
    player.style.top  = playerY + "px";
  }
</script>
</body>
</html>
